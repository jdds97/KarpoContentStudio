---
import Button from '@/components/common/Button.astro';
const { url } = Astro;
---

<header class="fixed w-full bg-primary-white/95 backdrop-blur-md z-50 py-4 border-b border-secondary-lightgray/20 shadow-sm">
    <div class="container mx-auto px-4 md:px-8">
      <nav class="flex justify-between items-center">
        <a href="/" class="flex items-center">
          <img 
            src="/images/logos/logo-optimized.webp" 
            alt="The Content Studio" 
            class="h-12 w-auto"
            style="aspect-ratio: 204/72;"
            width="204" 
            height="72"
            sizes="(max-width: 768px) 204px, 204px"
            loading="eager"
            decoding="async"
            fetchpriority="high"
          />
        </a>
        
        <!-- CSS-only mobile menu toggle -->
        <input type="checkbox" id="menu-toggle" class="hidden" />
        <label 
          for="menu-toggle" 
          class="lg:hidden relative w-12 h-12 rounded-xl bg-primary-beige/80 hover:bg-primary-beige transition-all duration-300 flex items-center justify-center group shadow-sm cursor-pointer"
          aria-label="Abrir menú de navegación"
        >
          <div class="hamburger-container">
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
            <span class="hamburger-line"></span>
          </div>
        </label>
        
        <!-- Navegación escritorio (sin cambios) -->
        <div class="hidden lg:flex items-center space-x-8">
          <a href="/" class="text-primary-black hover:text-primary-gray transition-colors relative group">Home
            {url.pathname === '/' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <a href="/studio-spaces" class="text-primary-black hover:text-primary-gray transition-colors relative group">Estudio
            {url.pathname === '/studio-spaces' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <a href="/target-audiences" class="text-primary-black hover:text-primary-gray transition-colors relative group">Público
            {url.pathname === '/target-audiences' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <a href="/rates" class="text-primary-black hover:text-primary-gray transition-colors relative group">Tarifas
            {url.pathname === '/rates' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <a href="/faq" class="text-primary-black hover:text-primary-gray transition-colors relative group">FAQ
            {url.pathname === '/faq' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <a href="/contact" class="text-primary-black hover:text-primary-gray transition-colors relative group">Contacto
            {url.pathname === '/contact' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </a>
          <Button href="/booking" variant="custom" class="bg-primary-black text-primary-white hover:bg-stone-500 hover:text-black transition-all duration-300 text-center mt-2 relative group font-semibold">
            Reserva
            {url.pathname === '/booking' && <span class="block absolute left-0 -bottom-2 w-full h-1 bg-primary-black rounded-t"></span>}
          </Button>
        </div>
      </nav>
      
      <!-- CSS-only Mobile Menu -->
      <div class="mobile-menu">
        <div class="mobile-menu-overlay"></div>
        <div class="mobile-menu-content">
          <nav class="space-y-1 mb-8">
            <a href="/" class={`mobile-nav-link ${url.pathname === '/' ? 'active' : ''}`}>Home</a>
            <a href="/studio-spaces" class={`mobile-nav-link ${url.pathname === '/studio-spaces' ? 'active' : ''}`}>Estudio</a>
            <a href="/target-audiences" class={`mobile-nav-link ${url.pathname === '/target-audiences' ? 'active' : ''}`}>Público</a>
            <a href="/rates" class={`mobile-nav-link ${url.pathname === '/rates' ? 'active' : ''}`}>Tarifas</a>
            <a href="/faq" class={`mobile-nav-link ${url.pathname === '/faq' ? 'active' : ''}`}>FAQ</a>
            <a href="/contact" class={`mobile-nav-link ${url.pathname === '/contact' ? 'active' : ''}`}>Contacto</a>
          </nav>
          <div class="space-y-4">
            <Button href="/booking" variant="custom" fullWidth class={`font-outfit font-semibold py-4 transition-all duration-300 rounded-2xl bg-primary-black text-primary-white hover:bg-stone-500 hover:text-black hover:scale-105 shadow-xl ${url.pathname === '/booking' ? 'ring-4 ring-primary-beige/40 scale-105' : ''}`}>
              <span class="flex items-center justify-center space-x-3">
                <span class="text-xl">✨</span>
                <span>Reservar Estudio</span>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                </svg>
              </span>
            </Button>
            <div class="text-center">
              <p class="text-primary-black/70 text-sm font-outfit">Tu espacio creativo te espera</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Relleno para compensar el header fijo -->
  <div class="h-20"></div>