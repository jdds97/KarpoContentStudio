---
interface Props {
  src: string;
  alt: string;
  width: number;
  height: number;
  sizes?: string;
  loading?: 'eager' | 'lazy';
  decoding?: 'async' | 'sync' | 'auto';
  class?: string;
  style?: string;
}

const {
  src,
  alt,
  width,
  height,
  sizes = '(max-width: 768px) 150px, 204px',
  loading = 'lazy',
  decoding = 'async',
  class: className,
  style
} = Astro.props;

// Calcular el aspect ratio
const aspectRatio = width / height;

// Generar srcset para diferentes densidades de pixel
const baseName = src.replace(/\.[^/.]+$/, '');
const extension = src.split('.').pop();

// Para logos, creamos diferentes tamaños basados en el diseño responsive
const srcSet = `${src} 1x, ${src} 2x`;
---

<img 
  src={src}
  srcset={srcSet}
  alt={alt}
  width={width}
  height={height}
  sizes={sizes}
  loading={loading}
  decoding={decoding}
  class={className}
  style={`aspect-ratio: ${aspectRatio}; ${style || ''}`}
/>
