---
import Button from '@/components/common/Button.astro';
import { FORM_LABELS, FORM_OPTIONS } from '@/utils';
---
<div class="bg-primary-white p-8 rounded-lg shadow-md">
    <form id="booking-form" action="/api/bookings/create" method="POST" class="space-y-6">
      <!-- Información Personal -->
      <div>
        <h4 class="text-lg font-outfit font-medium mb-4">{FORM_LABELS.booking.personalInfo}</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="name" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.name}</label>
            <input 
              type="text" 
              id="name" 
              name="name" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.email}</label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
          <div>
            <label for="phone" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.phone}</label>
            <input 
              type="tel" 
              id="phone" 
              name="phone" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
          <div>
            <label for="company" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.company}</label>
            <input 
              type="text" 
              id="company" 
              name="company" 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
        </div>
      </div>
      
      <!-- Detalles de Reserva -->
      <div>
        <h4 class="text-lg font-outfit font-medium mb-4">{FORM_LABELS.booking.sessionDetails}</h4>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label for="studio-space" class="block text-sm font-medium text-primary-gray mb-1">Área del Estudio *</label>
            <select 
              id="studio-space" 
              name="studio-space" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            >
              {FORM_OPTIONS.studioAreas.map((option) => (
                <option value={option.value}>{option.label}</option>
              ))}
            </select>
          </div>
          <div>
            <label for="package" class="block text-sm font-medium text-primary-gray mb-1">Paquete de Horas *</label>
            <select 
              id="package" 
              name="package" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            >
              {FORM_OPTIONS.durations.map((option) => (
                <option value={option.value}>{option.label}</option>
              ))}
            </select>
          </div>
          <div>
            <label for="date" class="block text-sm font-medium text-primary-gray mb-1">Fecha Deseada *</label>
            <input 
              type="date" 
              id="date" 
              name="date" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
          <div>
            <label for="time" class="block text-sm font-medium text-primary-gray mb-1">Hora de Inicio *</label>
            <input 
              type="time" 
              id="time" 
              name="time" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            />
          </div>
        </div>
      </div>
      
      <!-- Información Adicional -->
      <div>
        <h4 class="text-lg font-outfit font-medium mb-4">Información Adicional</h4>
        <div class="grid grid-cols-1 gap-4">
          <div>
            <label for="participants" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.participants}</label>
            <select 
              id="participants" 
              name="participants" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            >
              {FORM_OPTIONS.participants.map((option) => (
                <option value={option.value}>{option.label}</option>
              ))}
            </select>
          </div>
          <div>
            <label for="session-type" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.sessionType}</label>
            <select 
              id="session-type" 
              name="session-type" 
              required 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            >
              {FORM_OPTIONS.sessionTypes.map((option) => (
                <option value={option.value}>{option.label}</option>
              ))}
            </select>
          </div>
          <div>
            <label for="notes" class="block text-sm font-medium text-primary-gray mb-1">{FORM_LABELS.booking.fields.description}</label>
            <textarea 
              id="notes" 
              name="notes" 
              rows="4" 
              class="w-full px-3 py-2 border border-secondary-lightgray rounded-md focus:outline-none focus:ring-2 focus:ring-primary-beige"
            ></textarea>
          </div>
        </div>
      </div>
      
      <!-- Términos y Condiciones -->
      <div class="flex items-start">
        <div class="flex items-center h-5">
          <input 
            id="terms" 
            name="terms" 
            type="checkbox" 
            required 
            class="focus:ring-primary-beige h-4 w-4 text-primary-black border-secondary-lightgray rounded"
          />
        </div>
        <div class="ml-3 text-sm">
          <label for="terms" class="text-primary-gray">
            He leído y acepto los <a href="/terms" class="text-primary-black underline">términos y condiciones</a> y la <a href="/privacy-policy" class="text-primary-black underline">política de privacidad</a>.
          </label>
        </div>
      </div>
      
      <!-- Botón de Envío -->
      <div>
        <Button 
          type="submit" 
          variant="primary"
          fullWidth
          class="cursor-pointer"
        >
          {FORM_LABELS.booking.submit}
        </Button>
        <p class="text-xs text-center text-primary-gray mt-2">
          * La reserva no estará confirmada hasta recibir el pago. Te enviaremos un email con las instrucciones de pago.
        </p>
      </div>
    </form>
  </div>

<!-- Script para manejar el formulario -->
<script>
  import { BookingFormHandler } from '@/lib/booking-form';
  
  document.addEventListener('DOMContentLoaded', () => {
    new BookingFormHandler('booking-form');
  });
</script>